!function(a,b,c){b.module("services",[])}(window,window.angular),function(a,b,c){b.module("services").factory("Filters",["$http",function(a){function b(){return a.get(c)}var c="js/data/filters.json";return{getAll:b}}])}(window,window.angular),function(a,b,c){b.module("services").factory("Inputs",["$window",function(a){function c(a){i.push(a)}function d(a){i.push(a)}function e(c){g!==!0&&(g=!0,b.forEach(i,function(a){a()})),null!==h&&a.clearTimeout(h),h=a.setTimeout(function(){g=!1,b.forEach(j,function(a){a()})},150)}function f(){return g}var g=!1,h=null,i=[],j=[];return $(a).on("scroll",e),{isScrolling:f,onScrollStart:c,onScrollEnd:d}}])}(window,window.angular),function(a,b,c){b.module("services").factory("Projects",["$http",function(a){function c(a){b.forEach(a,function(b,c,d){c>0&&(b.prev=d[c-1]),c<a.length-1&&(b.next=d[c+1])})}function d(){var b=a.get(e);return b.then(function(a){var b=a.data;c(b)}),b}var e="js/data/projects.json";return{getAll:d}}])}(window,window.angular),function(a,b,c){b.module("services").factory("Search",["Projects","Students",function(a,c){function d(a,c){var d={key:function(a){return!(a.key!=c.key)},categories:function(a){var d=!1;return b.forEach(a.categories,function(a){!d&&c.categories.indexOf(a)>-1&&(d=!0)}),d},focus_tracks:function(a){var d=!1;return b.forEach(c.focus_tracks,function(c){b.forEach(a.students,function(a){!d&&a.focus_tracks.indexOf(c)>-1&&(d=!0)})}),d}};return Object.keys(c).forEach(function(b){c[b].length&&b in d&&(a=a.filter(d[b]))}),a}function e(a,e){return f.then(function(f){if(g)e(d(f.data,a));else{g=!0;var h=c.getAll();h.then(function(c){var g=c.data;b.forEach(f.data,function(a){b.forEach(a.students,function(b,c){g[b].sixplustwo=b,a.students[c]=g[b]})}),e(d(f.data,a))})}})}var f=a.getAll(),g=!1;return{query:e}}])}(window,window.angular),function(a,b,c){b.module("services").factory("Students",["$http",function(a){function b(){return a.get(c)}var c="js/data/students.json";return{getAll:b}}])}(window,window.angular),function(a,b,c){b.module("services").factory("Waypoints",["$window",function(a){function c(b){var c=new a.Waypoint(b);e.push(c)}function d(){b.forEach(e,function(a){a.destroy()})}var e=[];return{add:c,clearAll:d}}])}(window,window.angular),function(a,b,c){b.module("app",["services","ngRoute","ngSanitize"])}(window,window.angular),function(a,b,c){b.module("app").controller("AppController",["$scope",function(a){}])}(window,window.angular),function(a,b,c){b.module("app").controller("FilterMenuController",["$scope","$location","Filters","Search",function(a,c,d,e){function f(c){var d=[];return b.forEach(a.filters,function(a){a.focus==c&&d.push(a)}),d}function g(){return a.filters.filter(function(a){return a.selected})}function h(a){return g().indexOf(a)>-1}function i(b){var c=a.filters.indexOf(b);c>-1&&(a.filters[c].selected=!0)}function j(b){var c=a.filters.indexOf(b);c>-1&&(a.filters[c].selected=!1)}function k(){b.forEach(a.filters,j)}function l(c,d){function f(a,b){var c=a.students[0].last_name.toLowerCase(),d=b.students[0].last_name.toLowerCase();return d>c?-1:c>d?1:0}e.query(c,function(c){a.projects=[],b.forEach(c,function(c){b.forEach(c.students,function(b){var d=Object.create(c);d.students=[b],a.projects.push(d)})}),a.projects.sort(f),"function"==typeof d&&d()})}function m(){$("filter-menu").toggleClass("expanded")}function n(a){k(),i(a)}function o(a){$("filter-menu").removeClass("expanded"),c.path("/project/"+a.key)}function p(){d.getAll().then(function(c){b.forEach(c.data,function(b){b.selected=!1,a.filters.push(b)}),a.$watch("filters",function(c){if(b.isDefined(c)&&c.length){var d={};b.forEach(c,function(a){a.selected&&(a.type in d||(d[a.type]=[]),d[a.type].push(a.value))}),l(d),a.onChangeFilterSelection({selection:d,done:null})}},!0)})}a.projects=[],a.filters=[],a.getFiltersByFocus=f,a.getSelectedFilters=g,a.isSelected=h,a.selectFilter=i,a.removeFilter=j,a.resetFilters=k,a.toggleFilterMenu=m,a.onClickFilterItem=n,a.redirectToProject=o,p()}])}(window,window.angular),function(a,b,c){b.module("app").controller("HeaderViewController",["$scope","$window","$location","Waypoints",function(a,b,c,d){function e(a){c.path("/"),b.setTimeout(function(){$(".ss-header-navigation ."+a).trigger("click")},500)}function f(){$("filter-menu").toggleClass("expanded")}function g(){d.clearAll()}a.redirectToLandingSection=e,a.toggleFilterMenu=f,g()}])}(window,window.angular),function(a,b,c){b.module("app").controller("LandingViewController",["$scope","$window","$timeout","Inputs","Search","Students","Waypoints",function(a,c,d,e,f,g,h){function i(b){var c=new Image;c.src=b,a.storedImages.push(c)}function j(){var a=["images/blank.png","images/icons/arrow-down.svg","images/branding/grcd-2015-title.png","images/branding/letter-grid-title_2x.png","images/branding/letter-grid-flat.svg","images/controls/control-play.svg","images/controls/control-pause.svg","images/controls/control-replay.svg","media/motion-promo-desktop-v2.jpg"];b.forEach(a,i)}function k(){var c=["print","motion","interaction"];b.forEach(c,function(c){b.forEach(a.projects[c],function(a){i("images/teasers/"+a.students[0].sixplustwo+"_teaser.jpg")})})}function l(c,d){function e(a,b){var c=a.students[0].last_name.toLowerCase(),d=b.students[0].last_name.toLowerCase();return d>c?-1:c>d?1:0}f.query(c,function(c){"undefined"==typeof a.TOTAL_PROJECT_COUNT&&(a.TOTAL_PROJECT_COUNT=c.length),a.currentProjectCount=c.length,a.projects={print:[],motion:[],interaction:[]},b.forEach(c,function(c){b.forEach(c.students,function(d){var e=Object.create(c);e.students=[d],b.forEach(d.focus_tracks,function(b){a.projects[b].push(e)})})}),b.forEach(a.projects,function(a){a.sort(e)}),"function"==typeof d&&d()})}function m(b){a.prevProject=b,e.isScrolling()||(a.currentProject=b)}function n(){a.applyFilters({},function(){j(),c.outerWidth>640&&k()}),e.onScrollEnd(function(){d(function(){m(a.prevProject)},500)}),a.$on("$viewContentLoaded",function(){function a(a){$("#header").toggleClass("hidden","up"==a)}function b(a){$("#previews").hasClass("filtered")||$(".filter-bar").toggleClass("hidden","up"==a)}function e(a){$("#promo").toggleClass("hidden","down"==a)}function f(a){var b=k.offset();l.css({top:32,left:b.left+m.left})}$("body").attr("id","landing"),$.scrollIt({topOffset:c.outerWidth<=640?14:-50}),h.add({element:document.getElementById("info"),handler:a,offset:92}),h.add({element:document.getElementById("previews"),handler:b});var g=null,i=null,j=0;$(c).on("scroll",function(a){g=g||parseInt($("#previews").offset().top)-220,i=$(c).scrollTop(),g>=j&&i>g?e("down"):j>g&&g>=i&&e("up"),j=i});var k=$("#branding").find(".logo"),l=$("#branding").find(".letter-grid"),m={top:-240,left:-245};$(c).on("resize",f),d(f,500)})}a.applyFilters=l,a.prevProject=null,a.currentProject=null,a.onProjectHover=m,a.storedImages=[],n()}])}(window,window.angular),function(a,b,c){b.module("app").controller("ProjectViewController",["$scope","$window","$location","$routeParams","$timeout","$sce","Search","Waypoints",function(a,b,c,d,e,f,g,h){function i(){$("html, body").animate({scrollTop:0},650)}function j(a,b){var c=d.key.trim();g.query({key:c},function(c){0==c.length?b():a(c[0])})}function k(a){if(null==a)return"#";var b=a.students[0].sixplustwo;return"images/projects/"+b+"/"+b+"_banner."+u}function l(a){for(var b=[],c=a.students[0].sixplustwo,d="images/projects/"+c+"/"+c+"_0",e=1;t>=e;e++)b.push(a.has_gifs?d+e.toString()+".gif":d+e.toString()+"."+u);return b}function m(a){return!("undefined"==typeof a.vimeo_id)}function n(a){var b=f.trustAsResourceUrl("https://player.vimeo.com/video/"+a.vimeo_id);return b}function o(a){var b=a.vimeo_dimensions.width,c=a.vimeo_dimensions.height;return 100*parseFloat(c/b)}function p(a){return a.first_name+" "+a.last_name}function q(a){return"images/projects/"+a.sixplustwo+"/"+a.sixplustwo+"_portrait.jpg"}function r(a){c.path("/project/"+a.key)}function s(){j(function(b){a.project=b},function(){c.path("/"),a.apply()}),a.$on("$viewContentLoaded",function(){$("body").attr("id","project"),e(function(){var a=$("header"),b=$(".filter-bar");a.length&&a.removeClass("hidden"),b.length&&b.removeClass("hidden")},500)})}var t=3,u="jpg";a.project=null,a.scrollToTop=i,a.getProjectBannerUrl=k,a.getProjectImageUrls=l,a.hasVimeoEmbed=m,a.getSecureVimeoEmbedUrl=n,a.getVideoPaddingPercentage=o,a.getStudentFullName=p,a.getStudentPortraitLocation=q,a.redirectToProject=r,s()}])}(window,window.angular),function(a,b,c){b.module("app").directive("background",[function(){return{restrict:"A",scope:!0,link:function(a,b,d){var e=950,f=b.css("opacity");a.$watch(function(a){return a.$eval(d.background)},function(a){a!==c&&-1==a.indexOf("//")&&("transition"in d&&"false"===d.transition?b.css({"background-image":"url('"+a+"')"}):b.animate({opacity:0},e,function(){var c=new Image;$(c).on("load",function(c){b.css({opacity:"0","background-image":"url('"+a+"')"}).animate({opacity:f},e)}),c.src=a}))})}}}])}(window,window.angular),function(a,b,c){b.module("app").directive("filterBar",[function(){return{restrict:"E",scope:{onChangeFilterSelection:"&"},controller:"FilterBarController",link:function(a,b,c){},templateUrl:"js/templates/filter-bar.tpl.html"}}])}(window,window.angular),function(a,b,c){b.module("app").directive("filterMenu",[function(){return{restrict:"E",scope:{onChangeFilterSelection:"&"},controller:"FilterMenuController",link:function(a,b,c){function d(){b.toggleClass("expanded")}a.toggleFilterMenu=d},templateUrl:"js/templates/filter-menu.tpl.html"}}])}(window,window.angular),function(a,b,c){b.module("app").directive("includeReplace",[function(){return{require:"ngInclude",restrict:"A",link:function(a,b,c){b.replaceWith(b.children())}}}])}(window,window.angular),function(a,b,c){b.module("app").directive("motionPromo",[function(){return{restrict:"E",scope:!0,link:function(a,b,c){a.video=b.find("video").get(0)},templateUrl:"js/templates/motion-promo.tpl.html"}}])}(window,window.angular),function(a,b,c){b.module("app").directive("projectGallery",["$location",function(a){return{restrict:"E",scope:{projects:"=",mouseenter:"&",mouseleave:"&"},templateUrl:"js/templates/project-gallery.tpl.html",link:function(b,c,d){function e(a){b.currentProject=a,b.mouseenter({project:a})}function f(b){a.path("/project/"+b.key)}b.focus=d.focus,b.currentProject=null,b.setCurrentProject=e,b.redirectToProject=f}}}])}(window,window.angular),function(a,b,c){b.module("app").directive("removeOnError",[function(){return{restrict:"A",scope:!0,link:function(a,b,c){b.bind("error",function(a){a.preventDefault(),b.remove()})}}}])}(window,window.angular),function(a,b,c){b.module("app").directive("slidingPreview",[function(){return{restrict:"E",scope:{currentPreview:"=preview"},link:function(a,c,d){function e(a){var b=g.find(".preview.active"),c=g.find(".preview:not(.active)");c.css({"background-image":"url('images/teasers/"+a.students[0].sixplustwo+"_teaser.jpg')"}),b.add(c).toggleClass("active"),f=a}var f=null,g=c.find(".preview-buffer");a.$watch("currentPreview",function(a){b.isDefined(a)&&null!==a&&a!==f&&e(a)})},templateUrl:"js/templates/sliding-preview.tpl.html"}}])}(window,window.angular),function(a,b,c){b.module("app").directive("videoControls",[function(){return{restrict:"E",scope:{video:"="},link:function(a,b,c){function d(b){a.video.play()}function e(b){a.video.pause()}function f(b){a.pause(),a.video.currentTime=0,a.play()}function g(){a.playbackStatus="paused",a.video.addEventListener("play",function(b){a.$apply(function(){a.playbackStatus="playing"})}),a.video.addEventListener("pause",function(b){a.$apply(function(){a.playbackStatus="paused"})}),a.video.addEventListener("ended",function(b){a.$apply(function(){a.playbackStatus="ended"})}),a.$watch("playbackStatus",function(a){b.removeClass("playing paused ended").addClass(a)}),$(a.video).on("click",d)}a.play=d,a.pause=e,a.replay=f,g()},templateUrl:"js/templates/video-controls.tpl.html"}}])}(window,window.angular),function(a,b,c){b.module("app").config(["$routeProvider","$locationProvider",function(a,b){a.when("/project/:key",{controller:"ProjectViewController",controllerAs:"view",templateUrl:"js/templates/view-project.tpl.html"}),a.when("/",{controller:"LandingViewController",controllerAs:"view",templateUrl:"js/templates/view-landing.tpl.html"})}])}(window,window.angular),function(a,b,c){b.module("app").config(["$routeProvider",function(a){a.otherwise({redirectTo:"/"})}]).run(["$rootScope","$window",function(a,b){a.$on("$routeChangeSuccess",function(a){b.scrollTo(0,0)})}])}(window,window.angular);